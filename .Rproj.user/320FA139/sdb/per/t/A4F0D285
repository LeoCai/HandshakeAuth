{
    "contents" : "source(\"DataLoader.R\")\nsource(\"model/GloableConvert.R\")\n# file6A = \"./exp_24/exp6A/10_24_20_48_54_exp1_K_ACC.csv\"\n# file88 = \"./exp_24/exp88/10_24_20_48_53_exp1-K_ACC.csv\"\n\nfile6A = \"../handshake/1118/acc_mi.csv\"\nfile88 = \"../handshake/1118/acc_sam.csv\"\n# file6A = \"../handshake/1125/acc_mi.csv\"\n# file88 = \"../handshake/1125/acc_sam.csv\"\n\naccData = readExpData(file6A, file88, 0, 0)\n\n# fileGYR6A = \"./exp_24/exp6A/10_24_20_48_54_exp1_K_GYR.csv\"\n# fileGYR88 = \"./exp_24/exp88/10_24_20_48_53_exp1-K_GYR.csv\"\n\nfileGYR6A = \"../handshake/1118/gyr_mi.csv\"\nfileGYR88 = \"../handshake/1118/gyr_sam.csv\"\n# fileGYR6A = \"../handshake/1125/gyr_mi.csv\"\n# fileGYR88 = \"../handshake/1125/gyr_sam.csv\"\n\ngyrData = readGRYData(fileGYR6A, fileGYR88, 0, 0)\n\ninitTheta6A = 0\n\nstart = 10;\n#len = nrow(gyrData$gyr_6A)\nend = 30;\n\naccData$fg6A\n\ngaccInit6A = accData$fg6A[[1]][start,]\ngaccInit88 = accData$fg88[[1]][start,]\ngyr_6A = gyrData$gyr_6A[start:end, ]\ngyr_88 = gyrData$gyr_88[start:end, ]\nlacc6A = accData$lacc6A[start:end, ]\nlacc88 = accData$lacc88[start:end, ]\ncacc6A = accData$cacc6A[start:end]\ncacc88 = accData$cacc88[start:end]\npg6A = accData$pg6A[start:end]\npg88 = accData$pg88[start:end]\ncaCor = cor(cacc6A,cacc88)\ngpCor = cor(pg6A,pg88)\n\niterTheta = function(initTheta6A, initTheta88){\n  \n  initMatrix6A = getInitMatrix(gaccInit6A, initTheta6A)\n  initMatrix88 = getInitMatrix(gaccInit88, initTheta88)\n  \n  (matrix6A = updateMatrixByMultiGYR(gyr_6A, initMatrix6A,0.02))\n  (matrix88 = updateMatrixByMultiGYR(gyr_88, initMatrix88,0.02))\n  \n  accGloble6A = getGlobleAccs(lacc6A, matrix6A)\n  accGloble88 = getGlobleAccs(lacc88, matrix88)\n  \n#   c1 = dtw(as.numeric(accGloble6A[,1]),as.numeric(accGloble88[,1]))$distance\n#   c2 = dtw(as.numeric(accGloble6A[,2]),as.numeric(accGloble88[,2]))$distance\n#   c3 = dtw(as.numeric(accGloble6A[,3]),as.numeric(accGloble88[,3]))$distance\n  \n  c1 = abs(cor(as.numeric(accGloble6A[,1]),as.numeric(accGloble88[,1])))\n  c2 = abs(cor(as.numeric(accGloble6A[,2]),as.numeric(accGloble88[,2])))\n  c3 = abs(cor(as.numeric(accGloble6A[,3]),as.numeric(accGloble88[,3])))\n  print(paste(initTheta88,\"sd=\",sd(c(c1,c2,c3)), \"mean=\",mean(c(c1,c2,c3)),c1,c2,c3))\n  return(list(cor = c(c1,c2,c3), globleAcc6A = accGloble6A, globleAcc88 = accGloble88, iterCor = c(c1,c2,c3)))\n}\n\niterNum = 100;\n\niterCors = data.frame()\nfor (i in 1:iterNum){\n  initTheta88 = 2*pi/iterNum*i\n  rs = iterTheta(initTheta6A,initTheta88)\n  iterCors = rbind(iterCors,rs$iterCor)\n  # print(i)\n  #plot3dDatas(rs$globleAcc6A,rs$globleAcc88,\"\")\n}\n# \nmatplot(seq(0,2*pi, length.out = iterNum ),ylim = c(0,1),main=\"iterate theta similarity\" ,lty = 1,lwd=2, iterCors,type = \"l\",col = 1:3, xlab = \"InitTheta\", ylab=\"Similarity\")\nlegend(\"topright\",c(\"x\", \"y\",\"z\"),lty = c(1,1,1),col=c(1,2,3) )\n#abline(h = caCor, lty = 2, col = 1)\n#abline(h = gpCor, lty = 2, col = 2)\n\n# initTheta88 = 5.02654824574367\ninitTheta88 = 4.14690230273853\n# initTheta88 = 4.27256600888212\n# initTheta88 = 1.8\nend = nrow(gyrData$gyr_6A)\ngyr_6A = gyrData$gyr_6A[start:end, ]\ngyr_88 = gyrData$gyr_88[start:end, ]\nlacc6A = accData$lacc6A[start:end, ]\nlacc88 = accData$lacc88[start:end, ]\ncbacc6A = accData$cacc6A[start:end]\ncbacc88 = accData$cacc88[start:end]\npg6A = accData$pg6A[start:end]\npg88 = accData$pg88[start:end]\n\n\nrs = iterTheta(initTheta6A,initTheta88)\n\nplot(lacc6A$lv1,type=\"l\",lwd = 2)\nplotAndCor(lacc6A,lacc88,\"linear accelerometer\")\nplotAndCor2(cbacc6A,cbacc88,\"resultant accelerometer\")\nplotAndCor2(pg6A,pg88,\"projection on gravity direction\")\nplotAndCor(rs$globleAcc6A,rs$globleAcc88,\"accelerometer after transformation\")\n\n\nga6A = cbind(as.numeric(rs$globleAcc6A[,1]),-as.numeric(rs$globleAcc6A[,2]),as.numeric(rs$globleAcc6A[,3]))\nplotAndCor(ga6A,rs$globleAcc88)\n\nplot3dDatas(ga6A,rs$globleAcc88,\"accelerometer after transformation\")\n# \nplot3dDatas(lacc6A,lacc88,\"linear accelerometer\")\n# \n# initTheta88 = 2*pi/100*21\n# rs = iterTheta(initTheta6A,initTheta88)\n# plotAndCor2(as.numeric(rs$globleAcc6A[,1]),as.numeric(rs$globleAcc88[,1]),title1 = \"Global Data\")\n\n\n",
    "created" : 1451354008505.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "936335338",
    "id" : "A4F0D285",
    "lastKnownWriteTime" : 1448535896,
    "path" : "~/workspace/R/handshake_9_11/model/Convert.R",
    "project_path" : "model/Convert.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}